version: 9.0.0
generated: 2025-04-07T16:44:22.329753Z
changelogs:
  - pr: 106953
    summary: Optimize usage calculation in ILM policies retrieval API
    area: ILM+SLM
    type: enhancement
    issues:
      - 105773
  - pr: 113757
    summary: Store arrays offsets for keyword fields natively with synthetic source instead of falling back to ignored source.
    area: Mapping
    type: enhancement
    issues: []
  - pr: 117642
    summary: Adding endpoint creation validation to `ElasticInferenceService`
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 119503
    summary: Support indices created in ESv6 and updated in ESV7 using different LuceneCodecs as archive in current version.
    area: Search
    type: bug
    issues:
      - 117042
  - pr: 119546
    summary: Introduce `FallbackSyntheticSourceBlockLoader` and apply it to keyword fields
    area: Mapping
    type: enhancement
    issues: []
  - pr: 119995
    summary: "apm-data: Use representative count as event.success_count if available"
    area: Ingest Node
    type: bug
    issues: []
  - pr: 120751
    summary: Adding support for binary embedding type to Cohere service embedding type
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 120774
    summary: Retry ES|QL node requests on shard level failures
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 120869
    summary: Threadpool merge scheduler
    area: Engine
    type: feature
    issues: []
  - pr: 120957
    summary: Introduce `AllocationBalancingRoundSummaryService`
    area: Allocation
    type: enhancement
    issues: []
  - pr: 120998
    summary: ES|QL `change_point` processing command
    area: Machine Learning
    type: feature
    issues: []
  - pr: 121106
    summary: Add `ModelRegistryMetadata` to Cluster State
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 121240
    summary: Implement runtime skip_unavailable=true
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 121256
    summary: Run `TransportEnrichStatsAction` on local node
    area: Ingest Node
    type: enhancement
    issues: []
  - pr: 121260
    summary: Introduce a pre-mapping logical plan processing step
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 121324
    summary: Support duplicate suggestions in completion field
    area: Suggesters
    type: bug
    issues:
      - 82432
  - pr: 121327
    summary: Reduce Data Loss in System Indices Migration
    area: Infra/Core
    type: bug
    issues: []
  - pr: 121370
    summary: Improve SLM Health Indicator to cover missing snapshot
    area: ILM+SLM
    type: enhancement
    issues: []
  - pr: 121548
    summary: Adding support for specifying embedding type to Jina AI service settings
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 121784
    summary: Optionally allow text similarity reranking to fail
    area: Search
    type: enhancement
    issues: []
  - pr: 121805
    summary: Support subset of metrics in aggregate metric double
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 121827
    summary: Updates to allow using Cohere binary embedding response in semantic search queries
    area: Machine Learning
    type: bug
    issues: []
  - pr: 121885
    summary: Introduce batched query execution and data-node side reduce
    area: Search
    type: enhancement
    issues: []
  - pr: 121920
    summary: Account for the `SearchHit` source in circuit breaker
    area: Search
    type: enhancement
    issues:
      - 89656
  - pr: 121942
    summary: Allow partial results in ES|QL
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 121948
    summary: Add initial grammar and changes for FORK
    area: ES|QL
    type: feature
    issues: []
  - pr: 122062
    summary: Upgrade `discovery-ec2` to AWS SDK v2
    area: Discovery-Plugins
    type: breaking
    issues: []
    breaking:
      area: Cluster and node setting
      title: Upgrade `discovery-ec2` to AWS SDK v2
      details: |2-

        In earlier versions of {es} the `discovery-ec2` plugin was based on the AWS SDK v1. AWS will withdraw support for this SDK before the end of the life of {es} {minor-version} so we must migrate to the newer AWS SDK v2.
        Unfortunately there are several differences between the two AWS SDK versions which may require you to adjust your system configuration when upgrading to {es} {minor-version} or later. These differences include, but may not be limited to, the following items.
        * AWS SDK v2 does not support the EC2 IMDSv1 protocol.
        * AWS SDK v2 does not support the `aws.secretKey` or
          `com.amazonaws.sdk.ec2MetadataServiceEndpointOverride` system properties.

        * AWS SDK v2 does not permit specifying a choice between HTTP and HTTPS so
          the `discovery.ec2.protocol` setting is no longer effective.

        * AWS SDK v2 does not accept an access key without a secret key or vice
          versa.
      impact: |2-

        If you use the `discovery-ec2` plugin, test your upgrade thoroughly before upgrading any production workloads.
        Adapt your configuration to the new SDK functionality. This includes, but may not be limited to, the following items.
        * If you use IMDS to determine the availability zone of a node or to obtain
          credentials for accessing the EC2 API, ensure that it supports the IMDSv2
          protocol.

        * If applicable, discontinue use of the `aws.secretKey` and
          `com.amazonaws.sdk.ec2MetadataServiceEndpointOverride` system properties.

        * If applicable, specify that you wish to use the insecure HTTP protocol to
          access the EC2 API by setting `discovery.ec2.endpoint` to a URL which
          starts with `http://`.

        * Either supply both an access key and a secret key using the keystore
          settings `discovery.ec2.access_key` and `discovery.ec2.secret_key`, or
          configure neither of these settings.
      notable: true
      essSettingChange: false
  - pr: 122066
    summary: Adding elser default endpoint for EIS
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 122134
    summary: Adding integration for VoyageAI embeddings and rerank models
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 122218
    summary: Integrate with `DeepSeek` API
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 122224
    summary: Enable the use of nested field type with index.mode=time_series
    area: Mapping
    type: enhancement
    issues:
      - 120874
  - pr: 122250
    summary: "ESQL: Align `RENAME` behavior with `EVAL` for sequential processing"
    area: ES|QL
    type: enhancement
    issues:
      - 121739
  - pr: 122272
    summary: "[Inference API] Rename `model_id` prop to model in EIS sparse inference request body"
    area: Inference
    type: enhancement
    issues: []
  - pr: 122280
    summary: Use `FallbackSyntheticSourceBlockLoader` for number fields
    area: Mapping
    type: enhancement
    issues: []
  - pr: 122365
    summary: Fix handling of auto expand replicas for stateless indices
    area: Search
    type: bug
    issues: []
  - pr: 122381
    summary: Adds implementations of dotProduct and cosineSimilarity painless methods to operate on float vectors for byte fields
    area: Vector Search
    type: enhancement
    issues:
      - 117274
  - pr: 122390
    summary: Add health indicator impact to `HealthPeriodicLogger`
    area: Health
    type: enhancement
    issues: []
  - pr: 122458
    summary: '`DesiredBalanceReconciler` always returns `AllocationStats`'
    area: Allocation
    type: bug
    issues: []
  - pr: 122459
    summary: Double parameter markers for identifiers
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 122486
    summary: Add index mode to get data stream API
    area: Data streams
    type: enhancement
    issues: []
  - pr: 122586
    summary: "ESQL: Fix inconsistent results in using scaled_float field"
    area: ES|QL
    type: bug
    issues:
      - 122547
  - pr: 122615
    summary: Enable synthetic recovery source by default when synthetic source is enabled. Using synthetic recovery source significantly improves indexing performance compared to regular recovery source.
    area: Mapping
    type: enhancement
    issues:
      - 116726
  - pr: 122637
    summary: Use `FallbackSyntheticSourceBlockLoader` for `unsigned_long` and `scaled_float` fields
    area: Mapping
    type: enhancement
    issues: []
  - pr: 122638
    summary: Expose `input_type` option at root level for `text_embedding` task type in Perform Inference API
    area: Machine Learning
    type: enhancement
    issues:
      - 117856
  - pr: 122660
    summary: Render `aggregate_metric_double`
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 122708
    summary: Support partial results in CCS in ES|QL
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 122821
    summary: Fix functions emitting warnings with no source
    area: ES|QL
    type: bug
    issues:
      - 122588
  - pr: 122823
    summary: Prevent Query Rule Creation with Invalid Numeric Match Criteria
    area: Relevance
    type: bug
    issues: []
  - pr: 122852
    summary: Run `TransportGetDataStreamsAction` on local node
    area: Data streams
    type: enhancement
    issues: []
  - pr: 122857
    summary: Run `TransportGetWatcherSettingsAction` on local node
    area: Watcher
    type: enhancement
    issues: []
  - pr: 122860
    summary: Improved error message when index field type is invalid
    area: Mapping
    type: enhancement
    issues: []
  - pr: 122885
    summary: Run `TransportExplainLifecycleAction` on local node
    area: ILM+SLM
    type: enhancement
    issues: []
  - pr: 122890
    summary: Introduce `allow_partial_results` setting in ES|QL
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 122891
    summary: Pragma to load from stored fields
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 122921
    summary: Run `TransportGetMappingsAction` on local node
    area: Indices APIs
    type: enhancement
    issues: []
  - pr: 122933
    summary: Run XPack usage actions on local node
    area: Stats
    type: enhancement
    issues: []
  - pr: 122991
    summary: "GCS blob store: add `OperationPurpose/Operation` stats counters"
    area: Snapshot/Restore
    type: enhancement
    issues: []
  - pr: 122999
    summary: Store arrays offsets for ip fields natively with synthetic source
    area: Mapping
    type: enhancement
    issues: []
  - pr: 123085
    summary: Remove duplicated nested commands
    area: ES|QL
    type: bug
    issues: []
  - pr: 123150
    summary: Limit the number of chunks for semantic text to prevent high memory usage
    area: Machine Learning
    type: feature
    issues: []
  - pr: 123187
    summary: Add bit vector support to semantic text
    area: Vector Search
    type: enhancement
    issues: []
  - pr: 123396
    summary: Add initial grammar and planning for RRF (snapshot)
    area: ES|QL
    type: feature
    issues: []
  - pr: 123460
    summary: "ES|QL: Support `::date` in inline cast"
    area: ES|QL
    type: enhancement
    issues:
      - 116746
  - pr: 123543
    summary: Enhance memory accounting for document expansion and introduce max document size limit
    area: CRUD
    type: enhancement
    issues: []
  - pr: 123569
    summary: Abort pending deletion on `IndicesService` close
    area: Store
    type: enhancement
    issues: []
  - pr: 123588
    summary: Give Kibana user 'all' permissions for .entity_analytics.* indices
    area: Infra/Core
    type: enhancement
    issues: []
  - pr: 123630
    summary: Limit number of suppressed S3 deletion errors
    area: Snapshot/Restore
    type: bug
    issues:
      - 123354
  - pr: 123712
    summary: Process ILM cluster state updates on another thread
    area: ILM+SLM
    type: enhancement
    issues: []
  - pr: 123763
    summary: Skip semantic_text embedding generation when no content is provided.
    area: Relevance
    type: enhancement
    issues: []
  - pr: 123852
    summary: Retry when the server can't be resolved (Google Cloud Storage)
    area: Snapshot/Restore
    type: enhancement
    issues: []
  - pr: 124025
    summary: "[Inference API] Propagate product use case http header to EIS"
    area: Machine Learning
    type: enhancement
    issues: []
  - pr: 124048
    summary: Handle long overflow in dates
    area: Search
    type: bug
    issues:
      - 112483
  - pr: 124050
    summary: Use `FallbackSyntheticSourceBlockLoader` for boolean and date fields
    area: Mapping
    type: enhancement
    issues: []
  - pr: 124094
    summary: ES|QL slow log
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 124177
    summary: "Improve error message for ( and ["
    area: ES|QL
    type: bug
    issues:
      - 124145
  - pr: 124313
    summary: Optimize memory usage in `ShardBulkInferenceActionFilter`
    area: Search
    type: enhancement
    issues: []
  - pr: 124394
    summary: Avoid `NamedWritable` in block serialization
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 124446
    summary: "ESQL: Fail in `AggregateFunction` when `LogicPlan` is not an `Aggregate`"
    area: ES|QL
    type: bug
    issues:
      - 124311
  - pr: 124564
    summary: Restore `TextSimilarityRankBuilder` XContent output
    area: Ranking
    type: bug
    issues: []
  - pr: 124574
    summary: Allow passing several reserved state chunks in single process call
    area: Infra/Settings
    type: enhancement
    issues: []
  - pr: 124581
    summary: New `vector_rescore` parameter as a quantized index type option
    area: Vector Search
    type: enhancement
    issues: []
  - pr: 124594
    summary: Store arrays offsets for numeric fields natively with synthetic source
    area: Mapping
    type: enhancement
    issues: []
  - pr: 124595
    summary: '`ToAggregateMetricDouble` function'
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 124610
    summary: Remove page alignment in exchange sink
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 124638
    summary: Provide model size statistics as soon as an anomaly detection job is opened
    area: Machine Learning
    type: bug
    issues:
      - 121168
  - pr: 124669
    summary: Release semantic_text as a GA feature
    area: Mapping
    type: feature
    issues: []
    highlight:
      notable: true
      title: Release semantic_text as a GA feature
      body: semantic_text is now an official GA (generally available) feature! This field type allows you to easily set up and perform semantic search with minimal ramp up time.
      pr: 124669
  - pr: 124676
    summary: TO_LOWER processes all values
    area: ES|QL
    type: bug
    issues:
      - 124002
  - pr: 124690
    summary: Avoid creating known_fields for every check in Alias
    area: Indices APIs
    type: enhancement
    issues: []
  - pr: 124722
    summary: Add panama implementations of byte-bit and float-bit script operations
    area: Vector Search
    type: enhancement
    issues:
      - 117096
  - pr: 124738
    summary: Upgrade AWS v2 SDK to 2.30.38
    area: Machine Learning
    type: upgrade
    issues: []
  - pr: 124782
    summary: "Aggs: Let terms run in global ords mode no match"
    area: Aggregations
    type: bug
    issues: []
  - pr: 124823
    summary: Report failures on partial results
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 124841
    summary: Pass `IndexReshardingMetadata` over the wire
    area: Distributed
    type: bug
    issues: []
  - pr: 124898
    summary: Add cache support in `TransportGetAllocationStatsAction`
    area: Allocation
    type: enhancement
    issues:
      - 110716
  - pr: 124901
    summary: Calculate concurrent node limit
    area: ES|QL
    type: feature
    issues: []
  - pr: 124913
    summary: Report `original_types`
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 124918
    summary: Fix EQL double invoking listener
    area: EQL
    type: bug
    issues: []
  - pr: 124927
    summary: Use `FallbackSyntheticSourceBlockLoader` for `shape` and `geo_shape`
    area: Mapping
    type: enhancement
    issues: []
  - pr: 124929
    summary: Include failures in partial response
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 125023
    summary: Fix `AlibabaCloudSearchCompletionAction` not accepting `ChatCompletionInputs`
    area: Machine Learning
    type: bug
    issues: []
  - pr: 125054
    summary: Truncate `step_info` and error reason in ILM execution state and history
    area: ILM+SLM
    type: enhancement
    issues:
      - 124181
  - pr: 125117
    summary: "Permanently switch from Java SecurityManager to Entitlements. The Java SecurityManager has been deprecated since Java 17, and it is now completely disabled in Java 24. In order to retain an similar level of protection, Elasticsearch implemented its own protection mechanism, Entitlements. Starting with this version, Entitlements will permanently replace the Java SecurityManager."
    area: Infra/Core
    type: upgrade
    issues: []
  - pr: 125171
    summary: Reindex data stream indices on different nodes
    area: Data streams
    type: enhancement
    issues: []
  - pr: 125191
    summary: Fix sorting when `aggregate_metric_double` present
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 125204
    summary: Return a Conflict status code if the model deployment is stopped by a user
    area: Machine Learning
    type: bug
    issues:
      - 123745
  - pr: 125213
    summary: Run `TransportGetDataStreamOptionsAction` on local node
    area: Data streams
    type: enhancement
    issues: []
  - pr: 125214
    summary: Run `TransportGetDataStreamLifecycleAction` on local node
    area: Data streams
    type: enhancement
    issues: []
  - pr: 125239
    summary: Adding common rerank options to Perform Inference API
    area: Machine Learning
    type: enhancement
    issues:
      - 111273
  - pr: 125244
    summary: Disable logging in `ClusterFormationFailureHelper` on shutdown
    area: Cluster Coordination
    type: bug
    issues:
      - 105559
  - pr: 125259
    summary: Leverage scorer supplier in `QueryFeatureExtractor`
    area: Ranking
    type: enhancement
    issues: []
  - pr: 125345
    summary: ESQL - date nanos range bug?
    area: ES|QL
    type: bug
    issues:
      - 125439
  - pr: 125352
    summary: Fix NPE in rolling over unknown target and return 404
    area: Indices APIs
    type: bug
    issues: []
  - pr: 125357
    summary: Keep ordinals in conversion functions
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 125370
    summary: Set default similarity for Cohere model to cosine
    area: Machine Learning
    type: bug
    issues:
      - 122878
  - pr: 125404
    summary: Check if the anomaly results index has been rolled over
    area: Machine Learning
    type: upgrade
    issues: []
  - pr: 125446
    summary: Fix Semantic Text 8.x Upgrade Bug
    area: Mapping
    type: bug
    issues: []
  - pr: 125477
    summary: Prevent get datafeeds stats API returning an error when local tasks are slow to stop
    area: Machine Learning
    type: bug
    issues:
      - 104160
  - pr: 125520
    summary: Add `FailedShardEntry` info to shard-failed task source string
    area: Allocation
    type: enhancement
    issues:
      - 102606
  - pr: 125529
    summary: Store arrays offsets for boolean fields natively with synthetic source
    area: Mapping
    type: enhancement
    issues: []
  - pr: 125595
    summary: Esql - Fix lucene push down behavior when a range contains nanos and millis
    area: ES|QL
    type: bug
    issues: []
  - pr: 125599
    summary: Allow zero for `rescore_vector.oversample` to indicate by-passing oversample and rescoring
    area: Vector Search
    type: enhancement
    issues: []
  - pr: 125606
    summary: Rename deprecation index template
    area: Infra/Logging
    type: breaking
    issues:
      - 125445
    breaking:
      area: Logging
      title: Rename deprecation index template
      details: "The deprecation datastream contains log entries for deprecations that occured while Elasticsearch is running. The deprecation log entries had a mismatch in their dataset name. In order to avoid changing the dataset name in the existing datastream, a new datastream now exists."
      impact: "If querying for deprecations previously using the `.logs-deprecation.elasticsearch-default` datastream, you should now use the `.logs-elasticsearch.deprecation-default` datastream."
      notable: false
      essSettingChange: false
  - pr: 125636
    summary: Make `numberOfChannels` consistent with layout map by removing duplicated `ChannelSet`
    area: ES|QL
    type: bug
    issues: []
  - pr: 125650
    summary: Load `FieldInfos` from store if not yet initialised through a refresh on `IndexShard`
    area: Search
    type: bug
    issues:
      - 125483
  - pr: 125659
    summary: Non existing synonyms sets do not fail shard recovery for indices
    area: Analysis
    type: bug
    issues:
      - 125603
  - pr: 125666
    summary: Minor-Fixes Support 7x segments as archive in 8x / 9x
    area: Search
    type: bug
    issues: []
  - pr: 125690
    summary: Take double parameter markers for identifiers out of snapshot
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 125709
    summary: Store arrays offsets for unsigned long fields natively with synthetic source
    area: Mapping
    type: enhancement
    issues: []
  - pr: 125716
    summary: Return appropriate error on null dims update instead of npe
    area: Vector Search
    type: bug
    issues: []
  - pr: 125764
    summary: Fix `ReplaceMissingFieldsWithNull`
    area: ES|QL
    type: bug
    issues:
      - 126036
      - 121754
      - 126030
  - pr: 125881
    summary: Fixes a invalid warning from being issued when restoring a system data stream from a snapshot.
    area: Data streams
    type: bug
    issues: []
  - pr: 125916
    summary: Re-enable parallel collection for field sorted top hits
    area: Search
    type: bug
    issues: []
  - pr: 125930
    summary: Infer the score mode to use from the Lucene collector
    area: ES|QL
    type: enhancement
    issues: []
  - pr: 126077
    summary: Preventing `ConcurrentModificationException` when updating settings for more than one index
    area: Indices APIs
    type: bug
    issues: []
